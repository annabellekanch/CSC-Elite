<!DOCTYPE html>
<html>
    <head> 
        <title>Hospital Directory</title>
        <link rel = "stylesheet"  href = "directory.css"/> 
    </head>
    <body>
        <nav class="navbar">
            <div class="navbar_container">
                <a href="index.html" id="navbar_logo">LAHD</a>
            </div> 
        </nav> 
        <div class="hero" id="home">
            <div class="hero_container">
                <h1>Louisiana Acute Care Facility Directory</h1>
                <h2>Select a city to view facilities in your area!</h2>
            </div>
        </div>
        <form >
            <input type = "text" id = "searchBar" placeholder = "Search for a city" value = "" maxlength="25" autocomplete="off" onMouseDown="active();" onBlur="inactive();"/><input type = "submit" id = "searchBtn" value = "Go!" onClick = "SearchList();"/>
        </form>
        <p id="Search" value=""></p>

        <ul>
            <li><a href = "#">A</a>
                <ul>
                    <li><a href = "construction.html">Abbeville</a></li>
                    <li><a href = "construction.html">Alexandria</a></li>
                </ul>
            </li>
            <li><a href = "#">B</a>
                <ul>
                    <li><a href = "construction.html">Bastrop</a></li>
                    <li><a href = "BatonRouge.html">Baton Rouge</a></li>
                    <li><a href = "construction.html">Bogalusa</a></li>
                    <li><a href = "construction.html">Bosier</a></li>
                </ul>
            </li>
            <li><a href = "#">C</a>
                <ul>
                    <li><a href="construction.html">Chalmette</a></li>
                    <li><a href="construction.html">Columbia</a></li>
                    <li><a href="construction.html">Covington</a></li>
                    <li><a href="construction.html">Crowley</a></li>
                </ul>
            </li>
            <li><a href = "#">D</a>
                <ul>
                    <li><a href = "construction.html">DeRidder</a></li>
                </ul>
            </li>
        </ul>
        <script type = "text/javascript">
        function active()
        {
            var searchBar = document.getElementById('searchBar');
            if(searchBar.value == 'Search for a city')
            {
                searchBar.value = '';
                searchBar.placeholder = 'Search for a city';
            }
        }
        function inactive()
        {
            var searchBar = document.getElementById('searchBar');
            if(searchBar.value == '')
            {
                searchBar.value = 'Search for a city';
                searchBar.placeholder = '';
            }
        }

    function readTextFile(file) {
    var rawFile = new XMLHttpRequest(); // XMLHttpRequest (often abbreviated as XHR) is a browser object accessible in JavaScript that provides data in XML, JSON, but also HTML format, or even a simple text using HTTP requests.
    rawFile.open("GET", file, false); // open with method GET the file with the link file ,  false (synchronous)
    var allText="";
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4) // readyState = 4: request finished and response is ready
        {
            if(rawFile.status === 200) // status 200: "OK"
            {
                allText = rawFile.responseText; //  Returns the response data as a string
                //console.log(allText); // display text on the console
                //window.alert(allText);
            }
        }
    }
    rawFile.send(null); //Sends the request to the server Used for GET requests with param null
    return allText;
}
function SearchList()
        {
           var searchtxt = document.getElementById("searchBar").value; 

           var surl="";
           var file="directory.txt";
           var allText="Joy";

           allText=readTextFile(file);
       
           //window.alert(allText);

           //split and get the rows in an array
        var rows = allText.split('\n');

        //move line by line
        for (var i = 0; i < rows.length; i++) {
                //split by separator (,) and get the columns
                cols = rows[i].split(',');
                
                if(cols[1]==searchtxt)
                {
                    surl=cols[2];
                }
        }


            
            if(surl=="")
            {
                //window.alert("No search items found");
                window.open("Error.html");
            }
            else
            {
                window.open(surl);
            }
            
        }
        </script>
        <script src = "directory.js"></script>
    </body>
</html>